# Ð§Ð°ÑÑ‚ÑŒ 4: Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð§Ð°Ñ‚Ð°Ð¼Ð¸ Ð¸ ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑÐ¼Ð¸

Ð‘Ð¾Ñ‚ Ð¼Ð¾Ð¶ÐµÑ‚ Ð½Ðµ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¿ÐµÑ€ÐµÐ¿Ð¸ÑÑ‹Ð²Ð°Ñ‚ÑŒÑÑ, Ð½Ð¾ Ð¸ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð³Ñ€ÑƒÐ¿Ð¿Ð¾Ð²Ñ‹Ðµ Ñ‡Ð°Ñ‚Ñ‹: Ð±Ð°Ð½Ð¸Ñ‚ÑŒ Ð½Ð°Ñ€ÑƒÑˆÐ¸Ñ‚ÐµÐ»ÐµÐ¹, Ð½Ð°Ð·Ð½Ð°Ñ‡Ð°Ñ‚ÑŒ Ð°Ð´Ð¼Ð¸Ð½Ð¾Ð², Ð¼ÐµÐ½ÑÑ‚ÑŒ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ñ‡Ð°Ñ‚Ð°.

## Ð¡Ð¾Ð´ÐµÑ€Ð¶Ð°Ð½Ð¸Ðµ
1. [ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ð¸](#Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ-Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ð¸)
2. [Ð Ð°Ð±Ð¾Ñ‚Ð° Ñ ÑƒÑ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ°Ð¼Ð¸ (Ð‘Ð°Ð½/Ð Ð°Ð·Ð±Ð°Ð½)](#Ñ€Ð°Ð±Ð¾Ñ‚Ð°-Ñ-ÑƒÑ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ°Ð¼Ð¸-Ð±Ð°Ð½Ñ€Ð°Ð·Ð±Ð°Ð½)
3. [Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð°Ð¼Ð¸](#ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ-Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð°Ð¼Ð¸)
4. [ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ñ‡Ð°Ñ‚Ð°](#Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸-Ñ‡Ð°Ñ‚Ð°)

---

## ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ð¸

### Ðž Ñ‡Ð°Ñ‚Ðµ
```php
// ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð¾Ð±ÑŠÐµÐºÑ‚ Chat Ð¿Ð¾ ID
$chat = $client->getChat('CHAT_ID');

echo "ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ: " . $chat->title . "\n";
echo "Ð£Ñ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ¾Ð²: " . $chat->participantsCount . "\n";
echo "ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ: " . $chat->description . "\n";

// ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ñ‡Ð°Ñ‚ Ð¿Ð¾ ÑÑÑ‹Ð»ÐºÐµ-Ð¿Ñ€Ð¸Ð³Ð»Ð°ÑˆÐµÐ½Ð¸ÑŽ (my_chat)
$chat = $client->getChatByLink('my_chat');
```

### Ðž Ð±Ð¾Ñ‚Ðµ Ð² Ñ‡Ð°Ñ‚Ðµ
Ð§Ñ‚Ð¾Ð±Ñ‹ ÑƒÐ·Ð½Ð°Ñ‚ÑŒ, ÐºÐ°ÐºÐ¸Ðµ Ð¿Ñ€Ð°Ð²Ð° ÐµÑÑ‚ÑŒ Ñƒ Ð±Ð¾Ñ‚Ð° Ð² ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ð¾Ð¼ Ñ‡Ð°Ñ‚Ðµ:
```php
$memberInfo = $client->getMyMemberInfo('CHAT_ID');

if ($memberInfo->isAdmin) {
    echo "Ð¯ Ð°Ð´Ð¼Ð¸Ð½!";
}
```

---

## Ð Ð°Ð±Ð¾Ñ‚Ð° Ñ ÑƒÑ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ°Ð¼Ð¸ (Ð‘Ð°Ð½/Ð Ð°Ð·Ð±Ð°Ð½)

### ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ ÑÐ¿Ð¸ÑÐºÐ° ÑƒÑ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ¾Ð²
ÐœÐµÑ‚Ð¾Ð´ `getChatMembers` Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÑ‚ Ð¿Ð°Ð³Ð¸Ð½Ð°Ñ†Ð¸ÑŽ.

```php
// ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð¿ÐµÑ€Ð²Ñ‹Ðµ 20 ÑƒÑ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ¾Ð²
$list = $client->getChatMembers('CHAT_ID', count: 20);

foreach ($list->members as $member) {
    echo $member->user->firstName . " (" . $member->user->id . ")\n";
}
```

### Ð£Ð´Ð°Ð»ÐµÐ½Ð¸Ðµ (ÐšÐ¸Ðº/Ð‘Ð°Ð½)
ÐœÐµÑ‚Ð¾Ð´ `kickChatMember` ÑƒÐ´Ð°Ð»ÑÐµÑ‚ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ. ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ `block` Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÑÐµÑ‚, ÑÐ¼Ð¾Ð¶ÐµÑ‚ Ð»Ð¸ Ð¾Ð½ Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒÑÑ.

```php
// ÐŸÑ€Ð¾ÑÑ‚Ð¾ Ð²Ñ‹Ð³Ð½Ð°Ñ‚ÑŒ (ÑÐ¼Ð¾Ð¶ÐµÑ‚ Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒÑÑ)
$client->kickChatMember('CHAT_ID', userId: 12345, block: false);

// Ð—Ð°Ð±Ð°Ð½Ð¸Ñ‚ÑŒ (Ð½Ðµ ÑÐ¼Ð¾Ð¶ÐµÑ‚ Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒÑÑ)
$client->kickChatMember('CHAT_ID', userId: 12345, block: true);
```

### Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ
ÐœÐ¾Ð¶Ð½Ð¾ Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹ Ð¿Ð¾ ID (ÐµÑÐ»Ð¸ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ñ‡Ð°Ñ‚Ð° Ð¿Ð¾Ð·Ð²Ð¾Ð»ÑÑŽÑ‚).

```php
$client->addChatMembers('CHAT_ID', [123, 456]);
```

---

## Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð°Ð¼Ð¸

Ð’Ñ‹ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð½Ð°Ð·Ð½Ð°Ñ‡Ð°Ñ‚ÑŒ Ð°Ð´Ð¼Ð¸Ð½Ð¾Ð² Ð¸ Ð³Ð¸Ð±ÐºÐ¾ Ð½Ð°ÑÑ‚Ñ€Ð°Ð¸Ð²Ð°Ñ‚ÑŒ Ð¸Ñ… Ð¿Ñ€Ð°Ð²Ð° Ñ‡ÐµÑ€ÐµÐ· `ChatAdminBuilder`.

**Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð¿Ñ€Ð°Ð² (ChatAdminPermission):**
*   `READ_ALL_MESSAGES`: Ð’Ð¸Ð´ÐµÑ‚ÑŒ Ð²ÑÐµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ.
*   `ADD_REMOVE_MEMBERS`: Ð‘Ð°Ð½Ð¸Ñ‚ÑŒ/Ð´Ð¾Ð±Ð°Ð²Ð»ÑÑ‚ÑŒ.
*   `ADD_ADMINS`: Ð”Ð¾Ð±Ð°Ð²Ð»ÑÑ‚ÑŒ Ð´Ñ€ÑƒÐ³Ð¸Ñ… Ð°Ð´Ð¼Ð¸Ð½Ð¾Ð².
*   `CHANGE_CHAT_INFO`: ÐœÐµÐ½ÑÑ‚ÑŒ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ/Ð°Ð²Ð°Ñ‚Ð°Ñ€.
*   `PIN_MESSAGE`: Ð—Ð°ÐºÑ€ÐµÐ¿Ð»ÑÑ‚ÑŒ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ.
*   `WRITE`: ÐŸÐ¸ÑÐ°Ñ‚ÑŒ (ÐµÑÐ»Ð¸ Ñ‡Ð°Ñ‚ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ Ñ‡Ñ‚ÐµÐ½Ð¸Ñ).
*   `DELETE_MESSAGE`: Ð£Ð´Ð°Ð»ÑÑ‚ÑŒ Ñ‡ÑƒÐ¶Ð¸Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ.

### ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ Ð°Ð´Ð¼Ð¸Ð½Ð°

```php
use Looksmaxxer\Builders\ChatAdminBuilder;
use Looksmaxxer\Enums\ChatAdminPermission;

// ÐÐ°ÑÑ‚Ñ€Ð°Ð¸Ð²Ð°ÐµÐ¼ Ð¿Ñ€Ð°Ð²Ð°
$admin = ChatAdminBuilder::create(12345) // ID Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ
    ->alias('ÐœÐ¾Ð´ÐµÑ€Ð°Ñ‚Ð¾Ñ€') // ÐŸÐ¾Ð´Ð¿Ð¸ÑÑŒ
    ->permissions([
        ChatAdminPermission::DELETE_MESSAGE,
        ChatAdminPermission::BAN_USERS
    ]);

// ÐŸÑ€Ð¸Ð¼ÐµÐ½ÑÐµÐ¼
$client->promoteAdmins('CHAT_ID', [$admin]);
```

### Ð¡Ð½ÑÑ‚Ð¸Ðµ Ð¿Ñ€Ð°Ð² (Ð Ð°Ð·Ð¶Ð°Ð»Ð¾Ð²Ð°Ð½Ð¸Ðµ)

```php
$client->demoteAdmin('CHAT_ID', 12345);
```

### Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð°Ð´Ð¼Ð¸Ð½Ð¾Ð²

```php
$admins = $client->getChatAdmins('CHAT_ID');
```

---

## ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ñ‡Ð°Ñ‚Ð°

Ð‘Ð¾Ñ‚ Ð¼Ð¾Ð¶ÐµÑ‚ Ð¼ÐµÐ½ÑÑ‚ÑŒ Ð°Ð²Ð°Ñ‚Ð°Ñ€ÐºÑƒ, Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð¸ Ð·Ð°ÐºÑ€ÐµÐ¿Ð»ÐµÐ½Ð½Ð¾Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ñ‡Ð°Ñ‚Ð° Ñ‡ÐµÑ€ÐµÐ· `ChatUpdateBuilder`.

```php
use Looksmaxxer\Builders\ChatUpdateBuilder;

$update = ChatUpdateBuilder::create()
    ->title('ÐÐ¾Ð²Ð¾Ðµ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ Ñ‡Ð°Ñ‚Ð° ðŸš€')
    ->iconUrl('https://example.com/new_logo.png')
    ->notify(true); // Ð£Ð²ÐµÐ´Ð¾Ð¼Ð¸Ñ‚ÑŒ Ð²ÑÐµÑ… Ð¾ ÑÐ¼ÐµÐ½Ðµ

$client->updateChat('CHAT_ID', $update);
```

### Ð—Ð°ÐºÑ€ÐµÐ¿Ð»ÐµÐ½Ð¸Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ

```php
// Ð—Ð°ÐºÑ€ÐµÐ¿Ð¸Ñ‚ÑŒ
$client->pinMessage('CHAT_ID', 'MESSAGE_ID', notify: true);

// ÐžÑ‚ÐºÑ€ÐµÐ¿Ð¸Ñ‚ÑŒ
$client->unpinMessage('CHAT_ID');

// ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ñ‚ÐµÐºÑƒÑ‰ÐµÐµ Ð·Ð°ÐºÑ€ÐµÐ¿Ð»ÐµÐ½Ð½Ð¾Ðµ
$pinned = $client->getPinnedMessage('CHAT_ID');
```